/*Created		18.04.2006Modified		15.08.2006Project		Model		Company		Author		Version		Database		mySQL 4.1 */drop table IF EXISTS ___sessions;drop table IF EXISTS ___users;drop table IF EXISTS ___tags_map;drop table IF EXISTS ___tags;drop table IF EXISTS ___cats;drop table IF EXISTS ___comments;drop table IF EXISTS ___posts;Create table ___posts (	post_id Int NOT NULL,	cat_id Int NOT NULL DEFAULT 0 COMMENT 'ID катгории, к которой относится пост',	user_id Int NOT NULL DEFAULT 0 COMMENT 'user_id автора поста',	status Int NOT NULL COMMENT 'Численное значение статуса поста (может быть public, private, community, draft)',	super Bool NOT NULL DEFAULT 0 COMMENT 'Флаг, определяющий, является ли пост супер-постом (список супер-постов выводятся в сайдбаре)',	mtime Timestamp NOT NULL COMMENT 'Время последней модификации поста',	ctime Timestamp NOT NULL COMMENT 'Время создания поста',	moderated Bool NOT NULL DEFAULT 0 COMMENT 'Флаг, определяющий проверенность поста модератором',	comments_mode Int NOT NULL DEFAULT 1 COMMENT 'Флаг, определяющий правила комментирования поста. Комментарии могут быть включены для всех, скрыты или выключены',	filters Int NOT NULL DEFAULT 0 COMMENT 'Множество бинарных флагов, определяющих необходимые текстовые фильтры, которыми будет обработан текст поста',	shortcut Varchar(100) NOT NULL COMMENT 'Короткое имя поста, которое используется дл формирования его URL',	title Varchar(200) NOT NULL COMMENT 'Заголовок поста',	content Mediumtext NOT NULL COMMENT 'Контент поста',	cached_com_cnt Int NOT NULL DEFAULT 0 COMMENT 'Количестов комментариев к посту, которые не скрыты и  проверены модератором',	cached_com_cnt_total Int NOT NULL DEFAULT 0 COMMENT 'Полное количество комментариев к посту, включая скрытые и непроверенные модератором',	cached_tags Varchar(255) NOT NULL COMMENT 'ТТекстовые названия ассоциированных с постом тагов, перечисленные через запятую. Если поле содержит значение ",,", это значит, что оно не определено и будет заполнено при следующим считывании записи поста',	cached_content Mediumtext NOT NULL COMMENT 'Текст поста, обработанный фильтрами (кэш)',	cached_author Text NOT NULL COMMENT 'Данные об авторе поста, хранимые в виде сериализованного ассоциативного массива', Primary Key (post_id)) ENGINE = MyISAMCHARACTER SET utf8 COLLATE utf8_general_ci;Create table ___comments (	comment_id Int NOT NULL,	post_id Int NOT NULL COMMENT 'ID поста, к которому относится комментарий',	parent_id Int NOT NULL DEFAULT 0 COMMENT 'ID комментария, ответом на который являетс текущий комментарий',	user_id Int NOT NULL DEFAULT 0 COMMENT 'user_id автора комментария. Для анонимных пользователей принимает значение -1',	moderated Bool NOT NULL DEFAULT 0 COMMENT 'Флаг, определяющий, проверен ли комментарий модераором или нет',	hidden Bool NOT NULL DEFAULT 0 COMMENT 'Флаг, определяющий, скрытость комментария. Скрытые комментарии видны только авторам постов, к которым они относятся, и своим собственным авторам, если они зарегистрированные пользователи. Модераторы и супервизоры так же могут видеть скрытые комментарии',	mtime Timestamp NOT NULL COMMENT 'Время последней модификации коммента',	ctime Timestamp NOT NULL COMMENT 'Время создания коммента',	author_name Varchar(100) NOT NULL COMMENT 'Имя автора комментария',	author_email Varchar(100) NOT NULL COMMENT 'Email автора комментария',	author_hp Varchar(100) NOT NULL COMMENT 'URL домашней страницы автора комментария',	subj Varchar(200) NOT NULL COMMENT 'Тема комментария',	content Text NOT NULL COMMENT 'Текст комментария',	cached_content Text NOT NULL COMMENT 'Обработанный текст поля content', Primary Key (comment_id)) ENGINE = MyISAMCHARACTER SET utf8 COLLATE utf8_general_ci;Create table ___cats (	cat_id Int NOT NULL,	shortcut Varchar(100) NOT NULL COMMENT 'shortcut категории - короткое имя, которое будет использоваться в URL категории и относящихся к ней постов',	title Varchar(100) NOT NULL COMMENT 'Текстовое название категории',	description Text NOT NULL COMMENT 'Текстовое описание категории',	cached_cnt Int NOT NULL DEFAULT 0 COMMENT 'Количество постов в категории, имеющих статус public (посты, которые видимы всем)',	cached_cnt_reg Int NOT NULL DEFAULT 0 COMMENT 'Количество постов в категории, видимых зарегистрированным пользователям (посты, которые имеют статусы public или community)',	cached_cnt_total Int NOT NULL DEFAULT 0 COMMENT 'Полное количество постов в категории, включая драфты и скрытые посты',	cached_description Text NOT NULL COMMENT 'Обработанный текст поля description (кэш)', Primary Key (cat_id)) ENGINE = MyISAMCHARACTER SET utf8 COLLATE utf8_general_ci;Create table ___tags (	tag_id Int NOT NULL,	tag Varchar(50) NOT NULL COMMENT 'Текстовое значение тага',	cached_cnt Int NOT NULL DEFAULT 0 COMMENT 'Количество постов, ассоциированных с тагом, которые видны всем пользователям (статус public)',	cached_cnt_reg Int NOT NULL DEFAULT 0 COMMENT 'Количество постов, ассоциированных с тагом, которые видны зарегистрированным пользователям (статус public и community)',	cached_cnt_total Int NOT NULL DEFAULT 0 COMMENT 'Полное количество постов, ассоциированных с тагом', Primary Key (tag_id)) ENGINE = MyISAMCHARACTER SET utf8 COLLATE utf8_general_ci;Create table ___tags_map (	tag_id Int NOT NULL,	post_id Int NOT NULL, Primary Key (tag_id,post_id)) ENGINE = MyISAMCHARACTER SET utf8 COLLATE utf8_general_ci;Create table ___users (	user_id Int NOT NULL,	login Varchar(50) NOT NULL COMMENT 'Login пользователя',	name Varchar(50) NOT NULL COMMENT 'Имя пользователя',	email Varchar(50) NOT NULL COMMENT 'Email пользователя',	hp Varchar(50) NOT NULL COMMENT 'URL домашней страницы пользователя',	access_level Int NOT NULL COMMENT 'Уровень доступа пользователя (набор бинарных флагов, определяющих множество доступных ему действий)',	pwd Char(32) NOT NULL COMMENT 'Хэш-код пароля',	custom_data Text NOT NULL COMMENT 'Дополнительные пользовательские данные, хранимые в виде сериализованного асоциативного массива',	description Text NOT NULL COMMENT 'Текстовое описание пользователя (произвольный текст, который отображается на пользовательской странице)',	cached_post_cnt Int NOT NULL DEFAULT 0 COMMENT 'Количество постов, написанных пользователем, которые видимы для всех (имеют статус public)',	cached_post_cnt_reg Int NOT NULL DEFAULT 0 COMMENT 'Количество постов пользователя, которые видимы для зарегистрированных пользователей (имеют статус public или community)',	cached_post_cnt_total Int NOT NULL DEFAULT 0 COMMENT 'Полное количество постов, написанных пользователем',	cached_com_p_cnt Int NOT NULL DEFAULT 0 COMMENT 'Количество написанных комментов, которые не скрыты и прошли модерацию',	cached_com_p_cnt_total Int NOT NULL DEFAULT 0 COMMENT 'Полное количество написанных комментов',	cached_com_r_cnt Char(20) NOT NULL DEFAULT 0 COMMENT 'Количество нескрытых и прошедших модерацию комментов, относящихся к постам пользователя',	cached_com_r_cnt_total Int NOT NULL DEFAULT 0 COMMENT 'Полное количество кмментов, написанных к постам пользователя',	cached_description Text NOT NULL COMMENT 'Обработанный текст поля description (кэш)', Primary Key (user_id)) ENGINE = MyISAMCHARACTER SET utf8 COLLATE utf8_general_ci;Create table ___sessions (	sid Char(32) NOT NULL,	atime Timestamp NOT NULL COMMENT 'Время последнего обращения к сессии. Используется сборщиком мусора для уничтожения старых сессий',	ctime Timestamp NOT NULL COMMENT 'Время создания сессии',	data Text NOT NULL COMMENT 'Данные сессии', Primary Key (sid)) ENGINE = MyISAMCHARACTER SET utf8 COLLATE utf8_general_ci;